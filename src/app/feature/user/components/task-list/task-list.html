

<div class="task-list-header">
<h2 class="task-list-title">Task List</h2>


<div class="filter-controls-group">


<input
type="text"
placeholder="Search tasks..."
(input)="onSearch($event)"
class="search-input"/>

<mat-form-field appearance="outline" class="date-filter-input">
  <mat-label>Created Date</mat-label>
  <input 
    matInput 
    [matDatepicker]="picker" 
    (dateInput)="onDateChange($event)"
    [value]="selectedDate"
    placeholder="Select a date"
    readonly 
  />
  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
  <mat-datepicker #picker></mat-datepicker>
</mat-form-field>

<button 
  class="clear-date-button" 
  (click)="clearDateFilter()"
  [disabled]="!selectedDate"
  title="Clear Date Filter"
>
  <mat-icon>close</mat-icon>
</button>


</div>
</div>



<div class="task-list-container">
@for (task of filteredTasks; track task.id) {
<mat-card class="task-card">

  <mat-card-header>
    <mat-card-title>{{ task.title }}</mat-card-title>
    <mat-card-subtitle>
      Created On: {{ task.createdDate | date:'mediumDate' }}
    </mat-card-subtitle>

    <mat-icon
      mat-card-avatar
      [ngClass]="{
        'status-new': task.status === 'New',
        'status-progress': task.status === 'In Progress',
        'status-review': task.status === 'In Review',
        'status-done': task.status === 'completed'
      }">
      {{ task.status === 'completed' ? 'check_circle' :
         task.status === 'In Progress' ? 'autorenew' :
         task.status === 'In Review' ? 'visibility' :
         'schedule'
         }}
    </mat-icon>
  </mat-card-header>

  <mat-divider></mat-divider>

  <mat-card-content>
    <p><strong>Description:</strong><br>{{ task.description }}</p>
    <p><strong>Acceptance Criteria:</strong><br>{{ task.acceptanceCriteria }}</p>
    <p><strong>Priority:</strong> <span class="chip {{task.priority | lowercase}}">{{ task.priority }}</span></p>
    <p><strong>Story Points:</strong> {{ task.storyPoints }}</p>
    <p><strong>Assigned To:</strong> {{ task.assignedTo || 'Unassigned' }}</p>
    <p><strong>Status:</strong> <span class="chip {{task.status | lowercase}}">{{ task.status }}</span></p>
    <p><strong>Due Date:</strong> {{ task.completionDate | date:'mediumDate' }}</p>
  </mat-card-content>

</mat-card>


}

</div>