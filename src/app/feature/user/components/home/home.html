<div class="container">
  <mat-card class="greet">
    <h1> Welcome,
      <span>
        {{ userDetails.firstName[0].toUpperCase() + userDetails.firstName.slice(1).toLowerCase() }}
        {{ userDetails.lastName[0].toUpperCase() + userDetails.lastName.slice(1).toLowerCase() }}
      </span>
    </h1>
    <p class="subtitle">Here's an overview of your task progress</p>
  </mat-card>

  <div class="task-summary">
    <h2>Task Overview</h2>
    <div class="tasks">
      <mat-card class="task-card pending">
        <mat-card-header>
          <mat-card-title>{{pendingTaskCount}}</mat-card-title>
        </mat-card-header>
        <mat-card-content>Pending Tasks</mat-card-content>
      </mat-card>

      <mat-card class="task-card in-progress">
        <mat-card-header>
          <mat-card-title>{{progressTaskCount}}</mat-card-title>
        </mat-card-header>
        <mat-card-content>In Progress</mat-card-content>
      </mat-card>

      <mat-card class="task-card completed">
        <mat-card-header>
          <mat-card-title>{{completedTaskCount}}</mat-card-title>
        </mat-card-header>
        <mat-card-content>Completed</mat-card-content>
      </mat-card>

      <mat-card class="task-card total">
        <mat-card-header>
          <mat-card-title>{{totalTasks}}</mat-card-title>
        </mat-card-header>
        <mat-card-content>Total Tasks</mat-card-content>
      </mat-card>
    </div>
    <h2>Quick Actions</h2>
    <div class="quick-actions">
      <mat-card class="task-list">
        <mat-card-header>
          <mat-card-title>
            <button matButton="filled" (click)="taskList(userDetails.id)">Task Lists</button>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content style="color: white;">
            Click to see all tasks...
        </mat-card-content>
      </mat-card>
      <mat-card class="create">
        <mat-card-header>
          <mat-card-title>
            <button matButton="filled" (click)="createTask(userDetails.id)">Create Task</button>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content style="color: white;">
            Click to Create new task...
        </mat-card-content>
      </mat-card>
      <mat-card class="manage">
        <mat-card-header>
          <mat-card-title>
            <button matButton="filled" (click)="manageTask(userDetails.id)">Manage Task</button>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content style="color: white;">
            Click to manage your tasks...
        </mat-card-content>
      </mat-card>
    </div>
    <h2>Summary</h2>
    <mat-card class="quick-update">
      <div class="quick-update-header">
        <strong>Quick Update</strong>
        <p class="quick-update-text">
          Select a date below to view your task completion and creation summary for that specific day.
        </p>
      </div>
      <div class="filter-date-wrapper">
        <label class="filter-label">Filter By Date:</label>
        <input type="date" [(ngModel)]="cust_date" (change)="onChange()" matInput class="filter-date-input">
      </div>
      <mat-list role="list">
        <mat-list-item role="listitem">
          @if (todayCompletedTask > 0) {
            <p class="success-msg">
              Great job,
              <strong>{{ userDetails.firstName.charAt(0).toUpperCase() + userDetails.firstName.slice(1).toLowerCase() }}</strong>!
              You completed <strong>{{ todayCompletedTask }}</strong> tasks on
              <strong>{{ cust_date }}</strong>. Keep up the momentum!
            </p>
          }
          @else {
            @if (totalTasks == 0) {
              <p class="error-msg">No task available! Try creating a new task.</p>
            }
            @else {
              <p class="warning-msg">
                Hey
                <strong>{{ userDetails.firstName.charAt(0).toUpperCase() + userDetails.firstName.slice(1).toLowerCase() }}</strong>,
                you haven't completed any tasks on <strong>{{ cust_date }}</strong>.
                Let's try to finish at least one task!
              </p>
            }
          }
        </mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item>
          @if (todayCreatedTask > 0) {
            <p class="assigned-msg">
              On <strong>{{ cust_date }}</strong>, you created or were assigned
              <strong>{{ todayCreatedTask }}</strong> task(s).
            </p>
          }
          @else {
            <p class="no-creation-msg">
              No task created or assigned on <strong>{{ cust_date }}</strong>.
            </p>
          }
        </mat-list-item>
        <mat-divider></mat-divider>
      </mat-list>
    </mat-card>
  </div>
</div>
